{% extends "layouts/main.html" %}

{% block pageTitle %}
  Animal Profile - {{ serviceName }}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <form action="animal-profile" method="get">
      <div class="govuk-form-group {% if error %}govuk-form-group--error{% endif %}">
        <h1 class="govuk-label-wrapper">
          <label class="govuk-label govuk-label--l" for="animalName">
            Search for a species
          </label>
        </h1>
        <div id="animal-hint" class="govuk-hint">
          Enter a scientific name (e.g. Agave parviflora) or a common name.
        </div>
        
        {% if error %}
        <p id="animal-error" class="govuk-error-message">
          <span class="govuk-visually-hidden">Error:</span> {{ error }}
        </p>
        {% endif %}

        <input class="govuk-input {% if error %}govuk-input--error{% endif %}" 
               id="animalName" name="animalName" type="text" 
               value="{{ query }}" aria-describedby="animal-hint">
      </div>
      <button class="govuk-button" data-module="govuk-button">
        Search
      </button>
    </form>

    <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

    {% if result %}
      <span class="govuk-caption-l">Search result</span>
      <h2 class="govuk-heading-l">{{ result.title }}</h2>

      {% if result.image %}
        <img src="{{ result.image }}" alt="Image of {{ result.title }}" 
             style="width: 100%; max-width: 600px; border: 4px solid #f3f2f1; border-radius: 4px;">
        
        <p class="govuk-body govuk-!-margin-top-4">
          <a href="{{ result.link }}" class="govuk-link" target="_blank">
            View full details on Wikipedia (opens in new tab)
          </a>
        </p>
      {% else %}
        <div class="govuk-warning-text">
          <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
          <strong class="govuk-warning-text__text">
            <span class="govuk-warning-text__assistive">Warning</span>
            We found a match for "{{ result.title }}", but no primary image is available.
          </strong>
        </div>
      {% endif %}
    {% endif %}

  </div>
</div>
{% endblock %}